<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Film By Mdjillur — Cinematographer, Photographer, Editor & Drone Pilot</title>
    <meta name="description" content="Film By Mdjillur — cinematographer, photographer, editor and licensed drone pilot. Portfolio, services, booking and contact." />
    <meta name="theme-color" content="#07112a">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    <link rel="icon" href="data:;base64,=">

    <style>
      /* ========= THEME ========= */
      :root{
        --bg:#07112a; --bg-2:#071328; --panel:#0b1220; --accent:#ff6b35; --accent-2:#ff8a52; --muted:#98a0ad; --card:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        --glass: rgba(255,255,255,0.03); --radius:14px; --max-width:1200px;
      }
      * { box-sizing: border-box }
      html,body { height:100%; margin:0; font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; color: #e6eef6; background: radial-gradient(1200px 600px at 10% 10%, rgba(163,230,53,0.06), transparent), linear-gradient(180deg,var(--bg), #07112a 60%); }

      /* ---------- Layout ---------- */
      /* header height used to reserve space when header is fixed */
      :root { --header-height:84px; }
      .container { width:100%; max-width:var(--max-width); margin:0 auto; padding:20px; }
      header { display:flex; align-items:center; justify-content:space-between; gap:16px; padding:20px 24px; position:fixed; left:0; right:0; top:0; height:var(--header-height); z-index:120; backdrop-filter: blur(8px); background: linear-gradient(90deg, rgba(7,17,30,0.55), rgba(7,17,30,0.45)); box-shadow: 0 6px 30px rgba(2,6,23,0.6); }
      .brand { display:flex; gap:12px; align-items:center; }
      .logo { width:64px; height:64px; border-radius:14px; background:linear-gradient(120deg,#08101a,#0f1724); display:flex; align-items:center; justify-content:center; font-family:'Playfair Display',serif; font-size:20px; font-weight:700; color:var(--accent); box-shadow: 0 8px 30px rgba(0,0,0,0.6); }
      .nav { display:flex; gap:18px; align-items:center }
      /* Mobile nav toggler */
      .nav-toggle { display:none; background:transparent; border:0; color:var(--muted); cursor:pointer; padding:8px; border-radius:8px }
      .nav a { color:var(--muted); text-decoration:none; font-weight:600; padding:8px; border-radius:8px }
      .nav a:hover { color: #fff }
      /* Header CTA: stronger visibility — solid accent with white text */
      .cta { background: linear-gradient(90deg,#ff8a52,#ff6b35); padding:10px 14px; border-radius:12px; color: #fff; font-weight:700; text-decoration:none; box-shadow:0 6px 18px rgba(255,110,60,0.15); border: 1px solid rgba(255,255,255,0.04); }
        /* Booking CTA interactions */
        .book-btn { display:block; margin-top:12px; background:linear-gradient(90deg,var(--accent-2),var(--accent)); border-radius:10px; padding:12px; text-align:center; color:#071025; font-weight:800; transition: transform .15s ease, box-shadow .15s ease; }
        .book-btn:hover { transform: translateY(-3px); box-shadow:0 18px 40px rgba(255,110,60,0.12) }
        .book-btn:active { transform: translateY(-1px); box-shadow:0 8px 20px rgba(255,110,60,0.09) }

      /* ---------- Page Card ---------- */
      /* leave room for the fixed header to avoid content being hidden under it */
      body { padding-top: calc(var(--header-height) + 8px); }
        .cta { background: linear-gradient(90deg,#ff8a52,#ff6b35); padding:10px 14px; border-radius:12px; color: #fff; font-weight:700; text-decoration:none; box-shadow:0 6px 18px rgba(255,110,60,0.15); border: 1px solid rgba(255,255,255,0.04); transition: transform .12s ease, box-shadow .14s ease; }
        .cta:hover { transform: translateY(-3px); box-shadow:0 20px 44px rgba(255,110,60,0.22) }
        .cta:active { transform: translateY(-1px); box-shadow:0 8px 18px rgba(255,110,60,0.15) }

      .wrap { max-width:var(--max-width); margin:18px auto; padding:30px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:18px; box-shadow:0 20px 60px rgba(2,6,23,0.6); }
      .hero { display:grid; grid-template-columns: 1fr 420px; gap:30px; align-items:center; padding:28px }
      .hero-left h1 { font-family:'Playfair Display',serif; font-size:44px; margin:0 0 8px; line-height:1; }
      .hero-left p { color:var(--muted); margin:0 0 16px }
      .chips { display:flex; gap:8px; flex-wrap:wrap; margin:12px 0 }
      .chip { background:var(--glass); padding:8px 12px; border-radius:999px; color:#e6eef6; font-weight:700; font-size:12px; }

      .cards { display:grid; grid-template-columns: repeat(3,1fr); gap:12px; margin-top:12px }
      .card { background:var(--card); padding:16px; border-radius:12px; transition: transform .28s ease, box-shadow .3s ease; border:1px solid rgba(255,255,255,0.02) }
      .card:hover { transform: translateY(-6px); box-shadow: 0 20px 50px rgba(0,0,0,0.55) }
      .card h3 { margin:0 0 6px; font-size:15px }
      .card p { margin:0; color:var(--muted); font-size:13px }

      .hero-right { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:14px; box-shadow:0 8px 30px rgba(0,0,0,0.5) }
      .avail { display:flex; justify-content:space-between; align-items:center; gap:10px }
      .bigdate { font-weight:700; font-size:20px }
      .book-btn { display:block; margin-top:12px; background:linear-gradient(90deg,var(--accent-2),var(--accent)); border-radius:10px; padding:12px; text-align:center; color:#071025; font-weight:800 }

      /* ---------- Services / Work ---------- */
      main { padding:22px; }
      h2 { font-family:'Playfair Display', serif; margin:8px 0 12px }

      .services { display:grid; grid-template-columns: repeat(4, 1fr); gap:14px }
      .service { background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px; border-radius:12px; min-height:110px; display:flex; flex-direction:column; gap:8px; border:1px solid rgba(255,255,255,0.02) }

      .gallery { display:grid; grid-template-columns: repeat(3, 1fr); gap:8px }
      .gallery img { width:100%; height:200px; object-fit:cover; border-radius:10px; cursor:pointer; display:block; transition: transform .6s ease, opacity .25s ease }
      .gallery img:hover{ transform: scale(1.03); opacity:0.98 }

      /* Contact */
      .contact { display:grid; grid-template-columns: 1fr 380px; gap:18px; align-items:start }
      form { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,0.03) }
      label { font-weight:700; font-size:13px; color:#f3f6f8 }
      input, textarea, select { width:100%; padding:10px; border-radius:8px; border:none; background: rgba(255,255,255,0.02); color: #fff; margin-top:8px }
      textarea { min-height:120px; resize:vertical }

      /* --- Utilities & Small screens --- */
      .muted-small{font-size:13px;color:var(--muted)}
      .badge{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700;background:linear-gradient(90deg,var(--accent-2),var(--accent));color:#071027;font-size:12px}

      /* social button variants */
      .btn-ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); padding:8px 12px; border-radius:10px; color:var(--muted); cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:8px }
      /* Social buttons — brand gradients tuned for contrast */
      .btn-instagram { background: linear-gradient(90deg,#833ab4,#fd1d1d,#fcb045); color: white; border: none; padding:8px 12px; border-radius:10px; font-weight:700 }
      .btn-youtube { background: linear-gradient(90deg,#e52d27,#ff0000); color: white; border: none; padding:8px 12px; border-radius:10px; font-weight:700 }

      .modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.6); z-index:50; visibility:hidden; opacity:0; transition:opacity .2s ease, visibility .2s }
      .modal.show{ visibility:visible; opacity:1 }
      .modal .box { width:92%; max-width:720px; border-radius:12px; padding:18px; background:linear-gradient(180deg,#0b1220,#071024); border:1px solid rgba(255,255,255,0.03) }

      .lightbox { position:fixed; inset:0; background: rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; z-index:110; visibility:hidden; opacity:0; transition:opacity .2s ease, visibility .2s }
      .lightbox.show{ visibility:visible; opacity:1 }
      .lightbox img { max-width:94%; max-height:88vh; border-radius:10px; box-shadow:0 30px 70px rgba(0,0,0,0.6) }

      .floater { position:fixed; right:18px; bottom:18px; z-index:120; display:flex; flex-direction:column; gap:10px }

      /* small screens */
      @media (max-width:980px) { .hero{grid-template-columns:1fr; padding:18px} .cards{grid-template-columns:repeat(2,1fr)} .services{grid-template-columns:repeat(2,1fr)} .contact{grid-template-columns:1fr} .gallery{grid-template-columns:repeat(2,1fr)} header .nav{display:none} header .nav-toggle{display:inline-flex} }
      @media (max-width:560px) { .logo{width:52px;height:52px;font-size:18px} .cards{grid-template-columns:1fr} .services{grid-template-columns:1fr} .gallery img{height:160px} }

      /* Mobile nav panel */
      .mobile-panel { position:fixed; top:var(--header-height); left:0; right:0; background:linear-gradient(180deg, rgba(7,17,30,0.98), rgba(7,17,30,0.95)); padding:16px; display:none; z-index:119 }
      .mobile-panel.show { display:block }
      .mobile-panel a { display:block; padding:10px 8px; border-radius:8px; color:var(--muted); text-decoration:none; margin-bottom:6px }
      .mobile-panel a:hover{ color:white }
    </style>
  </head>
  <body>

    <!-- HEADER -->
    <header class="container" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">Md</div>
        <div>
          <div style="font-weight:800; font-size:14px">Film By Mdjillur</div>
          <div style="color:var(--muted); font-size:12px">Cinematographer • Photographer • Editor • Drone Pilot</div>
          <div style="font-size:12px; color:var(--muted); margin-top:4px">Think | Generate | Create | Because Nothing is Impossible |</div>
        </div>
      </div>

      <nav class="nav" role="navigation" aria-label="Primary">
        <a href="#home" data-scroll>Home</a>
        <a href="#work" data-scroll>Work</a>
        <a href="#services" data-scroll>Services</a>
        <a href="#book" data-scroll>Book</a>
        <a href="#contact" data-scroll>Contact</a>
        <a class="cta" href="#book" data-scroll>Book Now</a>
      </nav>
      <button id="navToggle" class="nav-toggle" aria-expanded="false" aria-label="Open menu">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path d="M4 7H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" /><path d="M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" /><path d="M4 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" /></svg>
      </button>
      </nav>
    </header>

    <!-- Mobile panel (collapses from header) -->
    <div id="mobilePanel" class="mobile-panel" aria-hidden="true">
      <a href="#home" data-scroll>Home</a>
      <a href="#work" data-scroll>Work</a>
      <a href="#services" data-scroll>Services</a>
      <a href="#book" data-scroll>Book</a>
      <a href="#contact" data-scroll>Contact</a>
      <a class="cta" href="#book" data-scroll style="display:inline-block; margin-top:8px">Book Now</a>
    </div>

    <!-- HERO CARD -->
    <div class="wrap">
      <section class="hero" id="home" aria-labelledby="hero-title">
        <div class="hero-left">
          <div style="display:flex; gap:12px; align-items:center">
            <div style="display:flex;flex-direction:column; gap:8px">
              <div class="badge" style="font-size:12px; width:max-content">Available for projects — worldwide</div>
              <h1 id="hero-title">Film By Mdjillur</h1>
              <div style="margin-top:6px; font-weight:600; color:rgba(255,255,255,0.85);">Think | Generate | Create | Because Nothing is Impossible |</div>
              <p class="muted-small">Cinematic camera work, drone cinematography, and full post-production services — we craft stories that stand out.</p>

              <div class="chips">
                <span class="chip">Commercials</span>
                <span class="chip">Short Films</span>
                <span class="chip">Music Videos</span>
                <span class="chip">Aerial / Drone</span>
                <span class="chip">Color Grading</span>
              </div>

              <div style="display:flex; gap:10px; align-items:center; margin-top:12px">
                <a href="#work" class="cta" data-scroll>View Portfolio</a>
                <button class="btn-ghost" id="playShowreel">Watch Reel</button>
                <button class="btn-ghost" onclick="document.getElementById('book').scrollIntoView({behavior:'smooth'})">Request Booking</button>
              </div>
            </div>
          </div>

          <div class="cards" style="margin-top:20px">
            <div class="card"><h3>Experience</h3><p>10+ years on set; commercials, music videos and narrative projects.</p></div>
            <div class="card"><h3>Gear & Workflow</h3><p>RED/ARRI capable pipelines, industry standard grading and delivery to multiple platforms.</p></div>
            <div class="card"><h3>Deliverables</h3><p>4K/6K masters, edited cuts, social cuts and raw on request.</p></div>
          </div>
        </div>

        <aside class="hero-right" aria-label="Booking & availability">
          <div style="display:flex;gap:12px;align-items:center;">
            <div style="width:68px;height:68px;border-radius:12px;background:linear-gradient(135deg,#081024,#081222); display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent);font-family:Playfair Display, serif;">FB</div>
            <div style="flex:1">
              <div style="font-weight:700">Book a shoot — limited weekly availability</div>
              <div style="color:var(--muted);font-size:13px;margin-top:6px">Choose a date, package and brief — confirmation within 24 hours for most requests.</div>
            </div>
          </div>

          <div style="margin-top:16px" class="avail">
            <div>
              <div style="color:var(--muted); font-size:13px">Next available date</div>
              <div class="bigdate" id="nextAvailable">Loading…</div>
            </div>
            <div style="text-align:right">
              <div style="color:var(--muted); font-size:12px">Timezone</div>
              <div style="font-weight:700">Local</div>
            </div>
          </div>

          <div style="margin-top:10px; display:flex; gap:10px; align-items:center; justify-content:space-between">
            <a href="#book" class="book-btn" data-scroll>Request Booking</a>
            <div style="text-align:right" class="muted-small">Travel & drone services available — permit & insurances arranged on request.</div>
          </div>
        </aside>
      </section>
    </div>

    <!-- MAIN: SERVICES / PORTFOLIO / CONTACT -->
    <main class="container">
      <section id="services" aria-labelledby="services-title">
        <h2 id="services-title">Services</h2>
        <div class="services">
          <div class="service animate-fade-in-up">
            <strong>Cinematography</strong>
            <p class="muted-small">Camera direction, lighting design, and on-set cinematography for narrative and branded projects.</p>
          </div>
          <div class="service animate-fade-in-up">
            <strong>Aerial / Drone</strong>
            <p class="muted-small">Licensed drone pilot for cinematic aerials, real estate, and action sequences (FPV + smooth cinematic rigs).</p>
          </div>
          <div class="service animate-fade-in-up">
            <strong>Post Production</strong>
            <p class="muted-small">Editing, color grading (DaVinci Resolve), sound design and deliverable packaging for all platforms.</p>
          </div>
          <div class="service animate-fade-in-up">
            <strong>Consult & Full Production</strong>
            <p class="muted-small">Project planning, crew sourcing and end-to-end production management for complex shoots.</p>
          </div>
        </div>
      </section>

      <section id="work" aria-labelledby="work-title" style="margin-top:34px">
        <!-- Showreel Section (always visible) -->
        <section id="showreel" style="margin-bottom:32px;">
          <h2 style="margin-bottom:12px;">Showreel</h2>
          <video id="showreelVideo" controls style="width:100%;max-width:720px;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,0.5);background:#000;">
            <source src="my-work/Showreel/Wedding Showreel FBMJ .mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <div class="muted-small" style="margin-top:8px;">A selection of my best work in cinematography, editing, and drone footage.</div>
        </section>

        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:18px">
          <div>
            <h2 id="work-title">Selected Works</h2>
            <div style="height:4px;width:60px;background:linear-gradient(90deg,var(--accent),var(--accent-2));border-radius:4px;margin-top:8px"></div>
          </div>
        </div>

        <!-- Category navigation for Work -->
        <div style="display:flex; gap:8px; align-items:center; margin-bottom:18px; overflow:auto; padding-bottom:6px">
          <button class="btn-ghost" data-cat="all">All</button>
          <button class="btn-ghost" data-cat="showreel">Showreel</button>
          <button class="btn-ghost" data-cat="Wedding">Wedding</button>
          <button class="btn-ghost" data-cat="All-Reels">All-Reels</button>
          <button class="btn-ghost" data-cat="Documentry">Documentry</button>
          <button class="btn-ghost" data-cat="Funny">Funny</button>
          <button class="btn-ghost" data-cat="Drone">Drone</button>
          <button class="btn-ghost" data-cat="FlashMob">FlashMob</button>
          <button class="btn-ghost" data-cat="Others">Others</button>
        </div>

        <!-- Per-folder sections -->
        <div class="work-sections">
          <section id="work-Wedding" class="work-category" data-cat="Wedding">
            <h3 style="margin-top:0; margin-bottom:10px">Wedding</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Trisha apu Single Trailer FBMJ.mp4" data-title="Trisha apu Single Trailer" poster=""></video>
                <figcaption class="video-caption">Trisha apu Single Trailer</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Tushi's Wedding Shorts 3.mp4" data-title="Tushi's Wedding Shorts" poster=""></video>
                <figcaption class="video-caption">Tushi's Wedding Shorts</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Neha Outdoor Shorts Final Two Rings 2.mp4" data-title="Neha Outdoor Shorts" poster=""></video>
                <figcaption class="video-caption">Neha Outdoor Shorts</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Koushik X arpita Wedding Teaser 1080p.mp4" data-title="Koushik X arpita Teaser" poster=""></video>
                <figcaption class="video-caption">Koushik X arpita Teaser</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Majhar and soshi FBMJ F.mp4" data-title="Majhar and Soshi" poster=""></video>
                <figcaption class="video-caption">Majhar and Soshi</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Mehedi Vai Test.mp4" data-title="Mehedi Vai Test" poster=""></video>
                <figcaption class="video-caption">Mehedi Vai Test</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Morshed x Chowa's Halud Night Trailer.mp4" data-title="Morshed x Chowa's Halud Night Trailer" poster=""></video>
                <figcaption class="video-caption">Morshed x Chowa's Halud Night Trailer</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Wedding/Borsha's Halud Traile FBMj Cut.mp4" data-title="Borsha's Halud Trailer" poster=""></video>
                <figcaption class="video-caption">Borsha's Halud Trailer</figcaption>
              </figure>
            </div>
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="Drone" style="display:none">View all</button>
            </div>
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="Others" style="display:none">View all</button>
            </div>
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="FlashMob" style="display:none">View all</button>
            </div>
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="Funny" style="display:none">View all</button>
            </div>
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="Documentry" style="display:none">View all</button>
            </div>
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="All-Reels" style="display:none">View all</button>
            </div>
            <!-- show 'view all' only when there are more than 3 items -->
            <div style="margin-top:8px; display:flex; justify-content:flex-end">
              <button class="btn-ghost view-all-btn" data-cat="Wedding" style="display:none">View all</button>
            </div>
          </section>

          <section id="work-All-Reels" class="work-category" data-cat="All-Reels">
            <h3 style="margin-top:0; margin-bottom:10px">Reels & Shorts</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/All-Reels/Trisha's Weddig Reel.mp4" data-title="Trisha's Wedding Reel" poster=""></video>
                <figcaption class="video-caption">Trisha's Wedding Reel</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/All-Reels/SGC Reel SkyView.mp4" data-title="SGC Reel SkyView" poster=""></video>
                <figcaption class="video-caption">SGC Reel SkyView</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/All-Reels/Reels.mp4" data-title="Reels" poster=""></video>
                <figcaption class="video-caption">Reels</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/All-Reels/Poraikhali SAAFT 2023 Final Reels SkyView.mp4" data-title="Poraikhali SAAFT" poster=""></video>
                <figcaption class="video-caption">Poraikhali SAAFT</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/All-Reels/Mymensingh reel.mp4" data-title="Mymensingh reel" poster=""></video>
                <figcaption class="video-caption">Mymensingh reel</figcaption>
              </figure>
            </div>
          </section>

          <section id="work-Documentry" class="work-category" data-cat="Documentry">
            <h3 style="margin-top:0; margin-bottom:10px">Documentary / Trailers</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Documentry/NBMC FBMJ Trailer.mp4" data-title="NBMC Trailer" poster=""></video>
                <figcaption class="video-caption">NBMC Trailer</figcaption>
              </figure>
            </div>
          </section>

          <section id="work-Funny" class="work-category" data-cat="Funny">
            <h3 style="margin-top:0; margin-bottom:10px">Funny / Shorts</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Funny/DSC_1071.mp4" data-title="DSC_1071" poster=""></video>
                <figcaption class="video-caption">DSC_1071</figcaption>
              </figure>
            </div>
          </section>

          <section id="work-FlashMob" class="work-category" data-cat="FlashMob">
            <h3 style="margin-top:0; margin-bottom:10px">FlashMob</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/FlashMob/Saleha Ishaque Final Flashmob.mp4" data-title="Saleha Ishaque Flashmob" poster=""></video>
                <figcaption class="video-caption">Saleha Ishaque Flashmob</figcaption>
              </figure>
            </div>
          </section>

          <section id="work-Others" class="work-category" data-cat="Others">
            <h3 style="margin-top:0; margin-bottom:10px">Other Projects</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Others/Shuvo Ahmed.mp4" data-title="Shuvo Ahmed" poster=""></video>
                <figcaption class="video-caption">Shuvo Ahmed</figcaption>
              </figure>
            </div>
          </section>

          <section id="work-Drone" class="work-category" data-cat="Drone">
            <h3 style="margin-top:0; margin-bottom:10px">Drone / Aerial</h3>
            <div class="videos-grid">
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Drone/Jamuna Chor FBMJ.mp4" data-title="Jamuna Chor" poster=""></video>
                <figcaption class="video-caption">Jamuna Chor</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Drone/Drone One Take Promotion TR.mp4" data-title="Drone One Take" poster=""></video>
                <figcaption class="video-caption">Drone One Take</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Drone/Sadapathar FBMJ .mp4" data-title="Sadapathar" poster=""></video>
                <figcaption class="video-caption">Sadapathar</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Drone/SkyView Adventures Khulna.mp4" data-title="SkyView Adventures Khulna" poster=""></video>
                <figcaption class="video-caption">SkyView Adventures Khulna</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Drone/PANAM2023  Film By Mdjillur_1080p.mp4" data-title="PANAM2023" poster=""></video>
                <figcaption class="video-caption">PANAM2023</figcaption>
              </figure>
              <figure class="video-item">
                <video controls class="lazy-video" preload="none" data-src="my-work/Drone/Poraikhali SAAFT 2023 Final 1080p.mp4" data-title="Poraikhali 1080p" poster=""></video>
                <figcaption class="video-caption">Poraikhali 1080p</figcaption>
              </figure>
            </div>
          </section>
        </div>

        <style>
          /* work sections styling */
          .work-sections { display:flex; flex-direction:column; gap:22px }
          .work-category h3 { font-family: 'Playfair Display', serif; }
          .videos-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:10px }
          /* limit visible items to 3 by default; JS will show/hide appropriately */
          .videos-grid .video-item:nth-child(n+4){ display:none }
          .videos-grid video { width:100%; height:150px; object-fit:cover; border-radius:12px; background:#000; transition: transform .18s ease, box-shadow .18s ease }
          .videos-grid video:hover { transform: translateY(-3px); box-shadow: 0 18px 40px rgba(0,0,0,0.45) }
          .video-item { position:relative; overflow:hidden; border-radius:12px; background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.35)); padding-bottom:6px }
          /* placeholder card when a slot is empty */
          .video-placeholder { display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px; color:var(--muted); border:1px dashed rgba(255,255,255,0.04); min-height:150px }
          .video-placeholder .icon { width:64px; height:64px; opacity:0.9 }
          .video-item .video-caption { padding:8px 6px; font-size:14px; color:var(--muted); text-align:left; font-weight:600 }
          .video-item::after{ content:''; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.25)); pointer-events:none }
          .video-item .play-overlay{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none }
          .video-item.media-ready .play-overlay{ display:none }
          .video-item .play-overlay svg{ width:64px; height:64px; opacity:0.95; filter: drop-shadow(0 8px 20px rgba(0,0,0,0.5)) }
          /* small screens: make touch targets a little taller */
          @media (max-width:560px) { .videos-grid video { height:180px } }
          .video-item video { cursor:pointer }
          @media (max-width:980px) { .videos-grid { grid-template-columns:repeat(2,1fr) } }
          @media (max-width:560px) { .videos-grid { grid-template-columns:1fr } }
          /* category active state */
          .btn-ghost.active { background: linear-gradient(90deg,var(--accent-2),var(--accent)); color: #071025; border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
        </style>
      </section>

      <section id="book" style="margin-top:32px">
        <h2>Request a Booking</h2>
        <div style="display:grid; grid-template-columns: 1fr 360px; gap:20px; margin-top:12px">
          <form id="booking" action="https://formsubmit.co/filmbymdjillur@gmail.com" method="POST">
            <div class="form-row" style="display:flex; gap:10px">
              <div style="flex:1">
                <label>Full name</label>
                <input name="name" required placeholder="John Doe">
              </div>
              <div style="width:200px">
                <label>Preferred Date</label>
                <input name="date" type="date" required>
              </div>
            </div>

            <div style="margin-top:12px">
              <label>Email</label>
              <input name="email" type="email" required placeholder="you@company.com">
            </div>

            <div style="margin-top:12px">
              <label>Service</label>
              <select name="service">
                <option>Cinematography</option>
                <option>Drone / Aerial</option>
                <option>Editing & Color</option>
                <option>Full Production</option>
              </select>
            </div>

            <div style="margin-top:12px">
              <label>Project brief</label>
              <textarea name="brief" placeholder="Tell me about your project (locations, scale, expected deliverables)"></textarea>
            </div>

              <div style="display:grid; gap:10px; margin-top:12px">
                <div style="display:flex; gap:10px; align-items:center">
                  <button type="submit" class="book-btn">Send Booking Request</button>
                  <div class="muted-small">Prefer calls? <strong>+8801777090950</strong></div>
                </div>
                <!-- New fields for user contact -->
                <div style="display:flex; gap:10px; align-items:center">
                  <div style="flex:1">
                    <label>Your number</label>
                    <input name="phone" required placeholder="e.g. +88017XXXXXXXX" />
                  </div>
                  <div style="width:260px">
                    <label>Other social link</label>
                    <input name="other_social" placeholder="Instagram / Facebook / LinkedIn url" />
                  </div>
                </div>
              </div>
          </form>

          <aside style="padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; border:1px solid rgba(255,255,255,0.03)">
            <h3 style="margin:0 0 10px">Available Packages</h3>
            <div style="display:flex; gap:8px; flex-direction:column">
              <div style="padding:10px;background:rgba(255,255,255,0.02);border-radius:8px">Half-day — 4 hours • starting <strong>৳25,000</strong></div>
              <div style="padding:10px;background:rgba(255,255,255,0.02);border-radius:8px">Full-day — 10 hours • starting <strong>৳45,000</strong></div>
              <div style="padding:10px;background:rgba(255,255,255,0.02);border-radius:8px">Drone add-on • per shoot • <strong>৳8,000</strong></div>
            </div>
            <p class="muted-small" style="margin-top:12px">Custom quotes available for commercial productions and multi-day shoots. Travel & permit costs may apply.</p>
          </aside>
        </div>

        <!-- Modal: list view for category (shows the full list of videos) -->
        <div id="listModal" class="modal" aria-hidden="true">
          <div class="box" role="dialog" aria-modal="true" aria-labelledby="listModalTitle">
            <div style="display:flex; justify-content:space-between; align-items:center; gap:12px">
              <div>
                <h3 id="listModalTitle">All works</h3>
                <div id="listModalSub" class="muted-small">Category</div>
              </div>
              <div style="display:flex; gap:8px; align-items:center">
                <button onclick="closeListModal()" class="btn-ghost">Close</button>
              </div>
            </div>

            <div id="listModalContent" style="margin-top:12px; display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; max-height:60vh; overflow:auto; padding-right:6px"></div>
          </div>
        </div>
      </section>

      <section id="contact" style="margin-top:34px">
        <h2>Contact</h2>
        <div class="contact" style="margin-top:12px">
          <form action="https://formsubmit.co/filmbymdjillur@gmail.com" method="POST">
            <div style="display:grid; gap:10px">
              <label style="font-weight:700">Your name</label>
              <input name="sender_name" required placeholder="Full name">

              <label>Email</label>
              <input name="sender_email" type="email" required placeholder="you@example.com">

              <label>Message</label>
              <textarea name="message" placeholder="How can I help?">
              </textarea>

              <div style="display:flex; gap:8px; align-items:center">
                <button class="book-btn">Send Message</button>
                <button type="button" class="btn-ghost" onclick="openContactModal()">Request Quote</button>
              </div>
            </div>
          </form>

          <aside style="padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.01));border:1px solid rgba(255,255,255,0.02)">
            <h3 style="margin:0">Quick Contact</h3>
            <p class="muted-small" style="margin-top:8px">Email: <strong>filmbymdjillur@gmail.com</strong></p>
            <p class="muted-small">WhatsApp / Phone: <strong>+8801777090950</strong></p>
            <div style="margin-top:10px; display:flex; gap:8px">
              <a href="https://instagram.com/filmbymdjillur" target="_blank" rel="noopener noreferrer" class="btn-instagram">Instagram</a>
              <a href="https://youtube.com/" target="_blank" rel="noopener noreferrer" class="btn-youtube">YouTube</a>
            </div>
          </aside>
        </div>
      </section>

      <!-- Footer -->
      <footer style="margin-top:40px; padding-bottom:30px; text-align:center; color:var(--muted)">
        <div style="display:flex; justify-content:center; gap:12px; align-items:center">
          <div class="logo" style="width:46px;height:46px;font-size:12px;">Md</div>
          <div style="text-align:left">
            <div style="font-weight:700">Film By Mdjillur</div>
            <div class="muted-small">Cinematographer · Drone Pilot · Editor</div>
          </div>
        </div>

        <p style="margin-top:18px; color:var(--muted); font-size:13px">&copy; <span id="currentYear"></span> Film By Mdjillur. All rights reserved.</p>
      </footer>

      <!-- Lightbox (supports images and video preview) -->
      <div id="lightbox" class="lightbox" onclick="toggleLightbox(false)">
        <img id="lightbox-img" src="" alt="open preview" style="display:none;max-width:94%;max-height:88vh;border-radius:10px;box-shadow:0 30px 70px rgba(0,0,0,0.6)">
        <video id="lightbox-video" controls style="display:none;max-width:94%;max-height:88vh;border-radius:10px;box-shadow:0 30px 70px rgba(0,0,0,0.6)"></video>
      </div>

      <!-- Modal (for reel or quote) -->
      <div id="modal" class="modal" onclick="closeModal(event)">
        <div class="box" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
          <div style="display:flex; justify-content:space-between; align-items:center; gap:10px">
            <div>
              <h3 id="modalTitle">Watch Showreel</h3>
              <p class="muted-small">A short sample reel with selected cinematography & aerial showcases.</p>
            </div>
            <button onclick="toggleModal(false)" class="btn-ghost">Close</button>
          </div>

          <div style="margin-top:12px; position:relative; padding-top:56.25%;">
            <iframe src="https://www.youtube.com/embed/ScMzIvxBSi4" style="position:absolute; inset:0; width:100%; height:100%; border:0; border-radius:8px" title="showreel" allowfullscreen></iframe>
          </div>
        </div>
      </div>

      <div id="notif" class="notif">Message sent — thank you! I will reach out within 24 hours.</div>

    </main>

    <script>
      // Basic dynamic pieces
      document.getElementById('currentYear').innerText = new Date().getFullYear();

      // Compute an eye-catching next available date: next + 5 days in local timezone
      (function setNextAvailable(){
        const el = document.getElementById('nextAvailable');
        const d = new Date(); d.setDate(d.getDate() + 5 + (Math.floor(Math.random() * 6)) );
        const opts = { weekday: 'short', month: 'short', day: 'numeric' };
        el.innerText = d.toLocaleDateString(undefined, opts) + ' — ' + d.toLocaleTimeString([], { hour: '2-digit', minute:'2-digit' });
      })();

      // Smooth scrolling for nav links: account for fixed header height so content isn't hidden
      document.querySelectorAll('[data-scroll]').forEach(a => {
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const target = a.getAttribute('href');
          if (!target || !target.startsWith('#')) return;

          const headerHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height')) || 84;
          if (target === '#home') {
            // Scroll to top, accounting for header
            window.scrollTo({ top: 0, behavior: 'smooth' });
            return;
          }

          const el = document.querySelector(target);
          if (!el) return;
          const top = window.scrollY + el.getBoundingClientRect().top - headerHeight - 6;
          window.scrollTo({ top, behavior: 'smooth' });
        });
      });

      // API base for form submissions — update if you run server on another port or host
      const API_BASE = 'http://localhost:3001';

      // Mobile nav toggle behavior
      const navToggle = document.getElementById('navToggle');
      const mobilePanel = document.getElementById('mobilePanel');
      if (navToggle) {
        navToggle.addEventListener('click', () => {
          const open = mobilePanel.classList.toggle('show');
          navToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
          mobilePanel.setAttribute('aria-hidden', open ? 'false' : 'true');
        });
        // close when clicking a link inside
        mobilePanel && mobilePanel.addEventListener('click', (e) => {
          const a = e.target.closest('a'); if (!a) return; mobilePanel.classList.remove('show'); navToggle.setAttribute('aria-expanded','false'); mobilePanel.setAttribute('aria-hidden','true');
        });
      }

      // Lightbox / media preview (supports images and videos)
      const lightbox = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      const lbVideo = document.getElementById('lightbox-video');

      // Open the lightbox with a given src and type
      function openLightbox(src, type = 'image'){
        if (!lightbox) return;
        if (type === 'video'){
          lbImg.style.display = 'none';
          lbVideo.style.display = 'block';
          lbVideo.src = src;
          lbVideo.play().catch(()=>{});
        } else {
          lbVideo.pause && lbVideo.pause();
          lbVideo.style.display = 'none';
          lbVideo.src = '';
          lbImg.style.display = 'block';
          lbImg.src = src;
        }
        lightbox.classList.add('show');
      }
      function toggleLightbox(force){ if (force === false) { if (lbVideo) { lbVideo.pause(); lbVideo.src = ''; lbVideo.style.display = 'none'; } if (lbImg) { lbImg.src = ''; lbImg.style.display = 'none'; } lightbox.classList.remove('show'); } }

      // Initialize lazy-video posters and overlays, and lazy-load when visible
      function makePosterSVG(title){
        // simple SVG poster (gradient + title + subtle film label)
        const escaped = title.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
        const svg = `<?xml version='1.0' encoding='utf-8'?><svg xmlns='http://www.w3.org/2000/svg' width='1280' height='720' viewBox='0 0 1280 720'><defs><linearGradient id='g' x1='0' x2='1'><stop offset='0' stop-color='%23081424'/><stop offset='1' stop-color='%23091b2e'/></linearGradient></defs><rect width='100%' height='100%' fill='url(%23g)' /><g fill='rgba(255,255,255,0.06)'><rect x='40' y='40' width='220' height='120' rx='10'/></g><g><text x='50%' y='60%' text-anchor='middle' font-family='Inter, system-ui, -apple-system, Roboto, Arial' font-size='36' font-weight='700' fill='%23ffffff' opacity='0.95'>${escaped}</text></g></svg>`;
        return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
      }

      // Try to create a small thumbnail image from a video's current frame.
      // Returns a Promise that resolves with the dataURL or rejects on failure.
      async function generatePosterFromVideo(videoEl, maxWidth = 960){
        if (!videoEl) return;
        try {
          // wait for metadata if necessary
          if (!videoEl.videoWidth || !videoEl.videoHeight){
            await new Promise(r => videoEl.addEventListener('loadedmetadata', r, {once:true}));
          }

          // pick a capture time (try 0.8s or 10% of duration) so we avoid black intro frames
          let captureTime = 0.8;
          if (videoEl.duration && videoEl.duration > 2) captureTime = Math.min(1.5, Math.max(0.5, videoEl.duration * 0.1));

          // If needed, seek to captureTime to get a suitable frame
          const trySeek = () => new Promise(resolve => {
            let finished = false;
            const onSeek = () => { if (!finished) { finished = true; resolve(true); } };
            const safeTimeout = setTimeout(() => { if (!finished) { finished = true; resolve(false); } }, 900);
            try {
              videoEl.addEventListener('seeked', onSeek, { once: true });
              videoEl.currentTime = Math.min(captureTime, Math.max(0, videoEl.duration - 0.1));
            } catch (e) {
              clearTimeout(safeTimeout);
              resolve(false);
            }
          });

          // remember whether video was playing so we can restore
          const wasPlaying = !videoEl.paused && !videoEl.ended;
          if (!videoEl.paused) videoEl.pause();

          // try to seek; if seek fails quickly, we will fallback to drawing current frame
          let seekedOK = false;
          try { seekedOK = await trySeek(); } catch(_) { seekedOK = false; }

          // Use video dimensions to size the canvas
          const width = videoEl.videoWidth || 1280;
          const height = videoEl.videoHeight || 720;
          const scale = Math.min(1, maxWidth / width);
          const w = Math.round(width * scale);
          const h = Math.round(height * scale);

          const canvas = document.createElement('canvas');
          canvas.width = w; canvas.height = h;
          const ctx = canvas.getContext('2d');
          try {
            ctx.drawImage(videoEl, 0, 0, w, h);
            // small checksum to ensure drawing succeeded
            const dataUrl = canvas.toDataURL('image/jpeg', 0.72);
            if (dataUrl && dataUrl.length > 1000){
              videoEl.poster = dataUrl;
              // mark generated so we don't try repeatedly
              videoEl.dataset.generatedPoster = '1';
            }
          } catch (err){
            // drawing failed (possibly cross-origin or no frame), leave SVG poster in place
            console.warn('poster capture failed', err);
          }

          // restore playback state
          if (wasPlaying) try { videoEl.play().catch(()=>{}); } catch(e){}
          return videoEl.poster || null;
        } catch (err){ console.warn('generatePosterFromVideo error', err); return null; }
      }

      // ensure each lazy video has a poster and play overlay
      // CDN base (will be replaced in CI if you configure one). Leave as empty string for local-only.
      const CDN_BASE = '__CDN_BASE__';

      // prefer server-generated thumbnails when available, otherwise use SVG placeholder
      function getServerThumbCandidates(videoSrc){
        if (!videoSrc) return [];
        const parts = videoSrc.split('/');
        const idx = parts.indexOf('my-work');
        if (idx === -1) return [];
        const rel = parts.slice(idx+1).join('/');
        const ext = rel.lastIndexOf('.') > -1 ? rel.slice(rel.lastIndexOf('.')) : '';
        const base = rel.slice(0, rel.length - ext.length);
        const basePath = `${parts.slice(0, idx+1).join('/')}/thumbnails/${base}`;
        // produce ordered candidates: if a CDN_BASE is set, try CDN URLs first
        const localCandidates = [
          `${basePath}-1280.avif`, `${basePath}-1280.webp`, `${basePath}-1280.jpg`,
          `${basePath}-640.avif`, `${basePath}-640.webp`, `${basePath}-640.jpg`,
          `${basePath}.avif`, `${basePath}.webp`, `${basePath}.jpg`,
          `${basePath}-320.avif`, `${basePath}-320.webp`, `${basePath}-320.jpg`
        ];
        if (typeof CDN_BASE === 'string' && CDN_BASE && CDN_BASE !== '__CDN_BASE__'){
          // ensure no trailing slash
          const baseUrl = CDN_BASE.replace(/\/+$/,'');
          // map local to CDN URLs first
          const cdnCandidates = localCandidates.map(p => {
            // p starts with 'my-work/thumbnails/' — drop the leading 'my-work/' if CDN root points to the bucket root
            return baseUrl + '/' + p.replace(/^my-work\//, '');
          });
          return cdnCandidates.concat(localCandidates);
        }
        return localCandidates;
      }
      

      document.querySelectorAll('figure.video-item').forEach(fig => {
        const v = fig.querySelector('video.lazy-video');
        if (!v) return;
        const title = v.dataset.title || 'Video';
        // prefer server-generated poster candidates (webp/jpg sizes). Try in order until one loads.
        const candidates = getServerThumbCandidates(v.dataset.src || v.getAttribute('src') || '');
        if (candidates.length){
          let found = false;
          (function tryNext(i = 0){
            if (i >= candidates.length) { if (!found) v.poster = makePosterSVG(title); return; }
            const c = candidates[i];
            const img = new Image();
            img.onload = () => { found = true; v.poster = c; };
            img.onerror = () => { tryNext(i+1); };
            img.src = c;
          })();
        } else {
          // set poster to an inline SVG while we generate a real poster from the video
          v.poster = makePosterSVG(title);
        }
        // add play overlay
        if (!fig.querySelector('.play-overlay')){
          const overlay = document.createElement('div'); overlay.className = 'play-overlay';
          overlay.innerHTML = `<svg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'><circle cx='50' cy='50' r='48' fill='rgba(0,0,0,0.45)' /><polygon points='40,30 70,50 40,70' fill='white'/></svg>`;
          fig.appendChild(overlay);
        }
      });

      // capture a showreel poster if available
      (function captureShowreelPoster(){
        const sr = document.getElementById('showreelVideo');
        if (!sr) return;
        // prefer server-generated poster if present
        const source = (sr.querySelector('source') && sr.querySelector('source').getAttribute('src')) || sr.getAttribute('src') || '';
        const candidates = (function(videoSrc){
          if (!videoSrc) return null;
          const parts = videoSrc.split('/');
          const idx = parts.indexOf('my-work'); if (idx === -1) return null;
          const rel = parts.slice(idx+1).join('/');
          const ext = rel.lastIndexOf('.') > -1 ? rel.slice(rel.lastIndexOf('.')) : '';
          const base = rel.slice(0, rel.length - ext.length);
          const basePath = `${parts.slice(0, idx+1).join('/')}/thumbnails/${base}`;
          return [
            `${basePath}-640.webp`, `${basePath}-640.jpg`, `${basePath}.webp`, `${basePath}.jpg`, `${basePath}-320.webp`, `${basePath}-320.jpg`
          ];
        })(source);
        if (candidates && candidates.length){
          let found = false;
          (function tryNext(i=0){ if (i>=candidates.length) { if (!found) sr.poster = makePosterSVG('Showreel'); return; } const c = candidates[i]; const img = new Image(); img.onload = () => { found = true; sr.poster = c; }; img.onerror = () => tryNext(i+1); img.src = c; })();
        } else {
          sr.poster = makePosterSVG('Showreel');
        }
        // when data available, create a fallback poster from the video's frame
        sr.addEventListener('loadeddata', () => { try { generatePosterFromVideo(sr, 1280).catch(()=>{}); } catch(e){} });
      })();

      // Intersection observer to lazy load videos when they are near viewport
      const lazyObserver = new IntersectionObserver((entries, obs)=>{
        entries.forEach(entry => {
          if (!entry.isIntersecting) return;
          const v = entry.target;
          if (v.dataset && v.dataset.src && !v.src){
            v.src = v.dataset.src;
            v.load && v.load();
            const p = v.closest && v.closest('figure.video-item'); if (p) p.classList.add('loaded');
            // when loadeddata is available, try to capture a thumbnail (best-effort)
            v.addEventListener('loadeddata', () => {
              // mark UI as ready
              const p2 = v.closest && v.closest('figure.video-item'); if (p2) p2.classList.add('media-ready');
              // attempt to capture a frame and use as poster
              try { generatePosterFromVideo(v, 960).catch(()=>{}); } catch(e){ /* ignore */ }
            });
          }
          // unobserve once loaded
          obs.unobserve(v);
        });
      }, { rootMargin: '200px 0px', threshold: 0.1 });
      document.querySelectorAll('video.lazy-video').forEach(v => lazyObserver.observe(v));

      // Click video previews to open the fullscreen lightbox
      document.querySelectorAll('.videos-grid video').forEach(v => v.addEventListener('click', (ev) => {
        ev.preventDefault(); ev.stopPropagation();
        // ensure source is loaded
        if (!v.src && v.dataset && v.dataset.src) {
          v.src = v.dataset.src;
        }
        const src = v.getAttribute('src') || v.currentSrc || v.dataset && v.dataset.src;
        if (!src) return;
        openLightbox(src, 'video');
      }));

      // Modal (showreel)
      function toggleModal(flag){ const m = document.getElementById('modal'); if (flag === false) { m.classList.remove('show') } else { m.classList.add('show') } }
      function closeModal(e){ if (e.target === e.currentTarget) toggleModal(false); }
      document.getElementById('playShowreel').addEventListener('click', () => toggleModal(true));

      // Category nav behavior — jump / filter to sections
      document.querySelectorAll('[data-cat]').forEach(btn => btn.addEventListener('click', (e) => {
        const cat = btn.getAttribute('data-cat');
        // active state
        document.querySelectorAll('[data-cat]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if (cat === 'all'){
          // scroll to work and show everything
          const target = document.getElementById('work');
          target && target.scrollIntoView({behavior:'smooth', block:'start'});
          return;
        }
        if (cat === 'showreel'){
          const el = document.getElementById('showreel'); el && el.scrollIntoView({behavior:'smooth', block:'start'});
          return;
        }
        // scroll to folder section
        const section = document.getElementById('work-' + cat);
        if (section) section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }));

        // default active category
        const defaultCatBtn = document.querySelector('[data-cat="all"]'); if (defaultCatBtn) defaultCatBtn.classList.add('active');

      // Forms have local simulated submissions
      function showNotification(msg){ const n = document.getElementById('notif'); n.innerText = msg; n.style.display='block'; setTimeout(()=>n.style.display='none', 3200); }

      // Booking and contact forms now use Formsubmit.co for direct email delivery.

      // Show/hide "View all" controls and implement list modal behavior
      function setupViewAllButtons(){
        document.querySelectorAll('.work-category').forEach(section => {
          // count only REAL videos (data-src or src present) — placeholders shouldn't count
          const grid = section.querySelector('.videos-grid');
          const realVideos = Array.from(grid.querySelectorAll('video.lazy-video')).filter(v => v.dataset.src || v.getAttribute('src'));
          const cat = section.dataset.cat;
          const btn = section.querySelector('.view-all-btn');
          if (!btn) return;
          if (realVideos.length > 3){ btn.style.display = 'inline-flex'; btn.addEventListener('click', ()=> openListModal(cat)); }
          else { btn.style.display = 'none'; }
        });
      }

      // Populate and open the list modal for a category
      function openListModal(cat){
        const modal = document.getElementById('listModal');
        const titleEl = document.getElementById('listModalTitle');
        const subEl = document.getElementById('listModalSub');
        const content = document.getElementById('listModalContent');
        content.innerHTML = '';
        const section = document.getElementById('work-' + cat);
        if (!section) return;
        titleEl.innerText = cat === 'All-Reels' ? 'Reels & Shorts' : cat;
        subEl.innerText = `All items in ${cat}`;
        // collect all videos in that section
        const vids = Array.from(section.querySelectorAll('video.lazy-video'));
        // if there are none, show placeholder
        if (!vids.length){ content.innerHTML = '<div class="muted-small">No media uploaded yet — check back soon.</div>'; }
        vids.forEach(v => {
          const src = v.dataset.src || v.getAttribute('src');
          const title = v.dataset.title || v.title || 'Untitled';
          const card = document.createElement('figure'); card.className = 'video-item';
          const vid = document.createElement('video'); vid.setAttribute('controls',''); vid.style.width='100%'; vid.style.height='160px'; vid.setAttribute('preload','none'); vid.dataset.src = src || '';
          vid.poster = v.poster || '';
          const cap = document.createElement('figcaption'); cap.className = 'video-caption'; cap.innerText = title;
          card.appendChild(vid); card.appendChild(cap);
          // clicking the card's video opens lightbox — ensure src loaded
          card.addEventListener('click', (e)=>{ e.stopPropagation(); if (vid.dataset.src && !vid.src) vid.src = vid.dataset.src; const s = vid.getAttribute('src') || vid.currentSrc || vid.dataset.src; if (s) openLightbox(s, 'video'); });
          content.appendChild(card);
        });
        modal.classList.add('show');
      }

      function closeListModal(){ const m = document.getElementById('listModal'); m && m.classList.remove('show'); }

      // close when clicking the listModal background
      const listModalEl = document.getElementById('listModal');
      if (listModalEl){ listModalEl.addEventListener('click', (e)=>{ if (e.target === e.currentTarget) closeListModal(); }); }

      // Ensure categories always display 3 consistent cards (real videos → placeholders)
      function ensurePlaceholders(){
        document.querySelectorAll('.work-category').forEach(section => {
          const grid = section.querySelector('.videos-grid');
          if (!grid) return;
          // count real videos (data-src or src)
          const realVideos = Array.from(grid.querySelectorAll('video.lazy-video')).filter(v => v.dataset.src || v.getAttribute('src'));
          // remove existing placeholders so we can re-fill deterministically
          Array.from(grid.querySelectorAll('.video-placeholder')).forEach(p => p.remove());
          const needed = Math.max(0, 3 - realVideos.length);
          for (let i=0;i<needed;i++){
            const fig = document.createElement('figure');
            fig.className = 'video-item video-placeholder';
            fig.setAttribute('aria-hidden','true');
            fig.innerHTML = `<div class="icon" aria-hidden="true"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none"><rect x="2" y="6" width="20" height="12" rx="2" stroke="rgba(255,255,255,0.08)" stroke-width="1.6" fill="rgba(255,255,255,0.02)"/><path d="M8 10v4l5-2-5-2z" fill="rgba(255,255,255,0.8)"/></svg></div><figcaption class="video-caption">Coming soon</figcaption>`;
            grid.appendChild(fig);
          }
        });
      }

      // initialize UI after DOM ready
      setTimeout(() => { ensurePlaceholders(); setupViewAllButtons(); }, 120);

      // Accessibility: close lightbox with escape
      document.addEventListener('keydown', (ev)=>{ if (ev.key === 'Escape'){ toggleLightbox(false); toggleModal(false); } });

      // Small enhancement: reveal elements on scroll
      const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('animate-fade-in-up'); });
      }, { threshold: 0.12 });
      document.querySelectorAll('.service, .card, .work-category, .video-item').forEach(el => revealObserver.observe(el));
    </script>

    </body>
  </html>